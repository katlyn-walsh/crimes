#!/bin/bash

accounts=( 
    "b9d37186-892d-4076-8145-78bbac4c8714" 
    "e60ca293-57b0-4337-ba3e-c3c759694dad"
    "9badd3f2-6626-45ae-9650-3c38e1440f0f"
    "a153f14e-7801-4907-b502-aae85d4dcd26"
    "0b56aa04-24c2-46b5-9179-f29b43a05906"
    "32441ce9-7436-4984-89c1-a6cdf9f8afd9"
    "90f2b925-53fe-4f58-8f95-9ba413def30e"
    "5d90faca-badb-41c0-894d-d6d2d0d9315c"
    "14695c87-d64a-4ca9-a71a-dec524af3966"
    "36d81d47-8b54-4140-9c06-4eb7189ed97e"
    "6354b931-b81d-4bb4-8721-f5199c45608b"
    "7fd2430a-eade-4b30-bd41-12b8a8ea6ae9"
    "1223734b-2aaa-445c-9f3b-8d7d59e4cc55"
    "09a12fb7-82c7-426f-9809-9af3e5afa988"
    "9f60415b-bddb-4472-8238-38d6144cb8da"
    "0b4483fa-920f-4e11-aeab-a820df66067d"
    "3d9600d3-eb12-49c7-b662-9903c758c7eb"
    "9acf8091-f8e5-4846-9215-d98f74bc3c15"
    "05e7511c-1774-447f-9f79-098617d6f540"
    "9bc68a82-f86b-44bc-9b59-216b69052eba"
    "edebfcf9-847c-4790-94c4-923b19f70f8d"
    "9e3ae33b-7c6a-4814-a6fd-8ee2c5ab8576"
    "377208c1-797c-4aeb-aa2a-feef5d382f9c"
    "63857281-634d-4bcd-8143-099c4c2cdec1"
    "81289ef5-a1ff-478b-b708-07f8e9f432b5"
    "5903400f-15ed-4c09-8f18-2de30b7ffe46"
    "a0301948-ab3a-4918-af37-e2af1dba899e"
    "a659ba56-baf5-4217-9271-692cc609701c"
    "22b5830f-a675-4c3e-8203-f640be5c19a9"
    "938a6026-3a58-425a-b916-7c09c19797d4"
    "ddd4badc-f281-4779-9f35-00b9737755fa"
    "b64d8f5b-eaf9-479c-b9f0-cb8ee84b3703"
    "789f87f9-890d-445b-9f44-c83fe7108e44"
    "c78ce4b8-f93c-4170-906b-63e186d76754"
    "5df2f0cf-7e27-456d-bf09-f2e42d7fb792"
    "f9b7f669-56ab-42aa-8439-9c78641052fb"
    "981e7d8f-628b-414c-a57e-6049a20b10e8"
    "7fd2430a-eade-4b30-bd41-12b8a8ea6ae9"
    "45c6aedb-43b9-41f4-b326-6a74e631dc06"
    "0bd2e385-9bd8-4a9b-852a-b1c15e445008"
    "6a88a192-b5aa-4dc2-bb66-2ab59ebaaf48"
    "0cea1028-8213-430c-b620-7f5da8f7efae"
    "f334998d-7ec5-495d-8c58-5c012d4c3783"
    "f5429fa7-08a3-4d4f-8ca6-651f405876a1"
    "5b1aeea3-17a7-43b2-a22c-1f2f9e60204d"
    "bb63598e-260f-496d-8896-c14d6fb3580c"
    "b502ca92-2c94-48b0-9afd-ddfb3e039404"
    "e39db63f-c26d-49ce-a029-2f0d9e057fd5"
    "b5c04869-d66a-4487-a8d4-a6ea1ed44ab9"
    "d916a5c2-fe9f-467f-8252-14b331db8b68"
    "a9c98346-9238-4f8f-9100-5ce20886eff5"
    "2274849c-0472-40dc-82c5-fd5350405f06"
    "b9b029d9-0e32-4ab8-85b8-80c69c7ac11c"
    "68abd624-80b1-4bb0-948d-accebdcd2ac4"
    "31bf28aa-dd2c-4f0e-9dd9-88b30f383ade"
    "e0cc8134-8b45-4d29-870e-e7bdc2bb1537"
    "f2d21c03-e56f-4c0c-8d0e-e0a200f3bb90"
    "5b44b385-4b61-493a-88f2-91dc5dc53a1d"
    "1f6dfcd0-8717-46cd-b976-08bedf23b8de"
    "04a58977-b043-459b-9c81-3f7245e603ba"
    "9ebcb7c1-a17d-4022-a8b9-2509fd82d48e"
    "e5cb472a-8e97-44be-923e-5ce56dace146"
    "a56492cc-51a5-4ef3-b05e-c50933e05888"
    "f7fcf05b-c70f-4101-90bf-31c413042353"
    "f5040b63-d6cd-465b-a0c7-4dd13e9f3db4"
    "fc621a1e-b8b3-4f8d-8d0f-aa27b7f7fe79"
    "62901e90-633d-4e3d-9413-5d0e3e391e8e"
    "40647a47-1229-4fd1-a911-849996d2b1ce"
    "a3e729f5-cbe2-4ee5-a813-4e87d88cea6b"
    "09a12fb7-82c7-426f-9809-9af3e5afa988"
    "875fa410-83f4-49a2-8669-c2e97b7c643d"
)

for account in "${accounts[@]}"
do
    echo "triggering finalize workflow for ${account}"

    requestBody="{\"account_id\": \"$account\", \"period_end\": \"2023-07-01T00:00:00Z\", \"dry_run\": false}"

    #echo grpcurl -protoset api.bin -plaintext -d "${requestBody}" 10.0.73.201:22725 hashicorp.cloud.internal.billing.statement.v1.StatementService/FinalizeStatement
    grpcurl -protoset api.bin -plaintext -d "${requestBody}" 10.0.73.201:22725 hashicorp.cloud.internal.billing.statement.v1.StatementService/FinalizeStatement

done
